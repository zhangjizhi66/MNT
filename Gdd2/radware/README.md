# RadWare 分析流程

## 1、将 ROOT 文件转换为 m4b 文件

1、打开 root2m4b.cc 代码，在开头修改输入的 ROOT 文件名、ROOT 文件中的 histogram 名称、输出的 m4b 文件名

2、随后在终端运行 root root2m4b.cc

### 输出文件

Gddmat2.m4b （或其他自定名称）

### 备注

1、RadWare 默认矩阵为 4096 道，若 ROOT 文件中的矩阵道数不足，冗余道址缺省为 0

## 2、生成一维投影谱

1、在终端运行 slice

2、随后输入上一步生成的 m4b 文件名

3、在程序询问 Take slices ? 后输入 n

4、在程序询问 Take projections ? 后输入 y

5、随后依次输入要写入的谱文件名 xtpj ytpj （分别为向x轴和y轴的投影；扩展名 .spe 可以省略；或其他自定名称）

6、完成以上步骤后程序会再次等待输入新的 m4b 文件名，这时直接按 ctrl+c 退出即可

### 输出文件

xtpj.spe  ytpj.spe （或其他自定名称）

## 3、拟合投影谱本底

0、确认配置文件 gfinit.dat 存在（否则运行时需要逐个确认参数；各参数含义参见配置文件注释）

1、在终端运行 gf3

2、输入一维投影谱名称 xtpj （或在上一步自定的其他名称；扩展名 .spe 可以省略；输入后会在屏幕上显示投影谱）

3、输入 bg （BackGround，gf3 内置命令，用于本底拟合）

4、在程序询问 Background length factor = ? 后直接回车使用默认值 1.0 （也可输入任意正实数）

5、聚焦到投影谱上，会出现定位十字；依次点击本底拟合的上下界

6、随后程序询问 ...Change length scale factor? ，根据拟合效果决定是否修改（该参数的含义见以下备注）；修改合适后进入下一步

7、输入 ws （Write Spectrum，gf3 内置命令，用于写入谱文件）

8、输入要写入的谱文件名 bg （扩展名 .spe 可以省略；或其他自定名称）

9、随后程序询问该谱文件中的谱名称，直接回车以使用与文件名相同的名称

10、输入 st，退出 gf3 程序

### 备注

1、length scale factor 即从一定的尺度去观察投影谱从而拟合本底；尺度越大相当于观察距离越远，本底就越平滑

## 4、开窗

1、在终端运行 xmesc

2、输入纲图文件名称；若无纲图文件则回车创建新纲图，并依次指定原子序数、基态自旋宇称

3、输入压缩矩阵文件名；若无压缩矩阵则回车创建新压缩矩阵，并依次输入原始 .m4b 文件名 (Gddmat2.e4b)、新的 .e4k 文件名 (Gddmat2.e4k)

4、输入能量和效率刻度文件名称 demo.aca demo.eff（扩展名均可省略；详见文件内注释；或其他自定名称）

### 备注

1、原始矩阵文件格式有 .mat 和 .m4b ，后者容量更大

2、压缩矩阵文件格式有 .esc 和 .e4k ，后者容量更大，保留了全部 4096 道